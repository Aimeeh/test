
@{
    //ViewBag.Title = "Index";
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>成都汉维斯流量数据采集系统</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="~/Content/img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css/bootstrap-responsive.min.css" rel="stylesheet" />
    @*<link href="~/Content/css/colorpicker.css" rel="stylesheet" />*@
    @*<link href="~/Content/css/datepicker.css" rel="stylesheet" />*@
    <link href="~/Content/css/jquery.datetimepicker.css" rel="stylesheet" />
    <link href="~/Content/css/uniform.css" rel="stylesheet" />
    <link href="~/Content/css/select2.css" rel="stylesheet" />
    @*<link href="~/Content/css/jquery.gritter.css" rel="stylesheet" />*@
    <link href="~/Content/css/fullcalendar.css" rel="stylesheet" />
    <link href="~/Content/css/matrix-style.css" rel="stylesheet" />
    <link href="~/Content/css/matrix-media.css" rel="stylesheet" />
    <link href="~/Content/css/bootstrap-wysihtml5.css" rel="stylesheet" />
    <link href="~/Content/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/css/datepicker.css" rel="stylesheet" />
    <link href="~/Content/css/bootstrap-table.css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,800' rel='stylesheet' type='text/css'>
    <style>
        .area {
            color: #982F4D;
            font-weight: 700;
            font-size: 15px;
            margin-left: 1.5rem;
            /*width: 20%;*/
            float: left;
            margin-left: 6rem;
            margin-top: 0.5rem;
        }

        .select_bor {
            /*border: solid 1px #a9b2b3;*/
            width: 30%;
            margin-left: 11rem;
            margin-top: 0.5rem;
        }

        .base_info {
            margin-left: 3rem;
            background: #798288;
            width: 93%;
            height: 2rem;
            line-height: 2rem;
        }

            .base_info span {
                margin-left: 0.5rem;
                color: white;
                font-weight: 600;
            }

        .content {
            border: solid #d0d0d0 1px;
            background: #F9F9F9;
        }

        .center_ {
            text-align: center !important;
        }
    </style>
</head>
<body>
    <div id="box">
        <!--Header-part-->
        <div id="header">
            <h1 style="background-image: url('../../Content/img/loginlogo.png');"><a href="dashboard.html">Heroways</a></h1>
        </div>
        <!--close-Header-part-->
        <!--top-Header-menu-->
        <div id="user-nav" class="navbar navbar-inverse">
            <ul class="nav">
                <li class="dropdown" id="profile-messages">
                    <a title="" href="#" data-toggle="dropdown" data-target="#profile-messages" class="dropdown-toggle"><i class="icon icon-user"></i>  <span class="text">欢迎 @ViewBag.UserID</span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#"><i class="icon-user"></i> My Profile</a></li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="icon-check"></i> My Tasks</a></li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="icon-key"></i> Log Out</a></li>
                    </ul>
                </li>
                <li class="dropdown" id="menu-messages">
                    <a href="#" data-toggle="dropdown" data-target="#menu-messages" class="dropdown-toggle"><i class="icon icon-cog"></i> <span class="text">帮助</span></a>
                    @*<ul class="dropdown-menu">
                            <li><a class="sAdd" title="" href="#"><i class="icon-plus"></i> new message</a></li>
                            <li class="divider"></li>
                            <li><a class="sInbox" title="" href="#"><i class="icon-envelope"></i> inbox</a></li>
                            <li class="divider"></li>
                            <li><a class="sOutbox" title="" href="#"><i class="icon-arrow-up"></i> outbox</a></li>
                            <li class="divider"></li>
                            <li><a class="sTrash" title="" href="#"><i class="icon-trash"></i> trash</a></li>
                        </ul>*@
                </li>
                <li class=""><a title="" href="#"><i class="icon icon-cog"></i> <span class="text">设置</span></a></li>
                <li class=""><a title="" href="login.html"><i class="icon icon-share-alt"></i> <span class="text">注销</span></a></li>
            </ul>
        </div>
        <!--close-top-Header-menu-->
        <!--start-top-serch-->
        <div id="search">
            <input type="text" placeholder="Search here..." />
            <button type="submit" class="tip-bottom" title="Search"><i class="icon-search icon-white"></i></button>
        </div>
        <!--close-top-serch-->
        <!--sidebar-menu-->
        <div id="sidebar">
            <a href="#" class="visible-phone"><i class="icon icon-home"></i> 主页</a>
            <ul>
                <li><a href="../../Home/Index"><i class="icon icon-home"></i> <span>主页</span></a> </li>
                @*<li> <a href="charts.html"><i class="icon icon-signal"></i> <span>Charts &amp; graphs</span></a> </li>*@
                <li> <a href="../../DataHandle/StationList/Index"><i class="icon icon-inbox"></i> <span>站点信息</span></a> </li>
                @*<li><a href="tables.html"><i class="icon icon-th"></i> <span>数据采集查询</span></a></li>*@
                @*<li><a href="grid.html"><i class="icon icon-fullscreen"></i> <span>Full width</span></a></li>*@
                <li class="submenu active">
                    <a href="#" v-on:click="showanno"><i class="icon icon-th-list"></i> <span>数据采集查询</span><span class="label label-important">3</span></a>
                    <ul id="listmesu">
                        <li><a href="../RainWaterReport/PeriodResult">畅流期流速仪法流量结果计算表</a></li>
                        <li><a href="../RainWaterReport/Index">雨量数据</a></li>
                        <li><a href="../RainWaterReport/WaterIndex">水位数据</a></li>
                    </ul>
                </li>
                @*<li><a href="buttons.html"><i class="icon icon-tint"></i> <span>Buttons &amp; icons</span></a></li>
                    <li><a href="interface.html"><i class="icon icon-pencil"></i> <span>Eelements</span></a></li>
                    <li class="submenu">
                        <a href="#"><i class="icon icon-file"></i> <span>Addons</span> <span class="label label-important">5</span></a>
                        <ul>
                            <li><a href="index2.html">Dashboard2</a></li>
                            <li><a href="gallery.html">Gallery</a></li>
                            <li><a href="calendar.html">Calendar</a></li>
                            <li><a href="invoice.html">Invoice</a></li>
                            <li><a href="chat.html">Chat option</a></li>
                        </ul>
                    </li>
                    <li class="submenu">
                        <a href="#"><i class="icon icon-info-sign"></i> <span>Error</span> <span class="label label-important">4</span></a>
                        <ul>
                            <li><a href="error403.html">Error 403</a></li>
                            <li><a href="error404.html">Error 404</a></li>
                            <li><a href="error405.html">Error 405</a></li>
                            <li><a href="error500.html">Error 500</a></li>
                        </ul>
                    </li>*@
                <li class="content">
                    <span>Monthly Bandwidth Transfer</span>
                    <div class="progress progress-mini progress-danger active progress-striped">
                        <div style="width: 77%;" class="bar"></div>
                    </div>
                    <span class="percent">77%</span>
                    <div class="stat">21419.94 / 14000 MB</div>
                </li>
                <li class="content">
                    <span>Disk Space Usage</span>
                    <div class="progress progress-mini active progress-striped">
                        <div style="width: 87%;" class="bar"></div>
                    </div>
                    <span class="percent">87%</span>
                    <div class="stat">604.44 / 4000 MB</div>
                </li>
            </ul>
        </div>
        <!--sidebar-menu-->
        <!--main-container-part-->
        <div id="content" style="min-height: 89%;">
            <!--breadcrumbs-->
            <div id="content-header">
                <div id="breadcrumb"> <a href="index.html" title="Go to Home" class="tip-bottom"><i class="icon-home"></i> Home</a></div>
            </div>
            <!--End-breadcrumbs-->
            <!--Action boxes-->
            <div class="container-fluid">
                <div class="content">
                    <div class="widget-content nopadding">
                        <form class="form-horizontal">
                            <div class="control-group">
                                <label class="control-label">站点编码:</label>
                                <div class="controls">
                                    <input type="text" v-model="StationID" class="span11" style="width:40%;" placeholder="站点编码" />
                                </div>
                                <label class="control-label">站点名称:</label>
                                <div class="controls">
                                    <input type="text" v-model="StationName" class="span11" style="width:40%;" placeholder="站点名称" />
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">起始时间:</label>
                                <div data-date="12-02-2012" class="input-append date datepicker" style="margin-left: 1rem;">
                                    <input type="text" class="some_class" value="" id="some_class_1" />
                                    <span class="add-on"><i class="icon-th"></i></span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">结束时间:</label>
                                <div data-date="12-02-2012" class="input-append date datepicker" style="margin-left: 1rem;">
                                    <input type="text" class="some_class" value="" id="some_class_2" />
                                    <span class="add-on"><i class="icon-th"></i></span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">数据显示方式:</label>
                                <div class="controls">
                                    <label>
                                        <input type="radio" value="定时报" name="radios" />
                                        定时报
                                    </label>
                                    <label>
                                        <input type="radio" value="全部报" name="radios" />
                                        全部报
                                    </label>
                                    <label>
                                        <input type="radio" value="加报报" name="radios" />
                                        加报报
                                    </label>
                                </div>
                            </div>
                            <div class="form-actions" style="margin-left:50%;">
                                <button type="button" v-on:click="btn_Search" class="btn btn-success">查询</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="content">
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="widget-box" style="width: 97%;margin-left: 1rem;">
                                <div class="widget-title">
                                    <span class="icon"><i class="icon-th"></i></span>
                                </div>
                                <div class="widget-content nopadding" style="height: 400px;overflow: auto;">
                                    <table id="table_server" class="table table-bordered">
                                        @*<thead>
                                                <tr>
                                                    <th>测试时间</th>
                                                    <th>水位</th>
                                                    <th>电压</th>
                                                    <th>数据接收时间</th>
                                                    <th>报送类型</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="gradeX">
                                                    <td class="center_">2018-06-05 10:15:00</td>
                                                    <td class="center_">
                                                        27.8
                                                    </td>
                                                    <td class="center_">14.2</td>
                                                    <td class="center_">
                                                        2018-06-05 10:15:49
                                                    </td>
                                                    <td class="center_">5分钟数据报</td>
                                                </tr>
                                                <tr class="gradeX">
                                                    <td class="center_">2018-06-05 10:10:00</td>
                                                    <td class="center_">
                                                        27.5
                                                    </td>
                                                    <td class="center_">14.5</td>
                                                    <td class="center_">
                                                        2018-06-05 10:10:25
                                                    </td>
                                                    <td class="center_">5分钟数据报</td>
                                                </tr>
                                            </tbody>*@
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--end-main-container-part-->
        <!--Footer-part-->

        <div class="row-fluid">
            <div id="footer" class="span12"> CopyRight © 2017 By 成都汉维斯水文监测平台 <a href="http://themedesigner.in/">Themedesigner.in</a> </div>
        </div>
</div>
        <!--end-Footer-part-->
        @*<script src="~/Content/js/excanvas.min.js"></script>*@
        @*<script src="~/Content/js/jquery.min.js"></script>*@
        <script src="~/Content/js/jquery-3.1.1.min.js"></script>
        @*<script src="~/Content/js/jquery.form.js"></script>
            <script src="~/Content/js/jquery.ui.custom.js"></script>*@
        <script src="~/Content/js/bootstrap-table.js"></script>
        <script src="~/Content/js/bootstrap-table-zh-CN.min.js"></script>
        <script src="~/Content/js/bootstrap.min.js"></script>
        <script src="~/Content/js/bootstrap-colorpicker.js"></script>
        <script src="~/Content/js/bootstrap-datepicker.js"></script>
        <script src="~/Content/js/jquery.datetimepicker.full.js"></script>
        @*<script src="~/Content/js/jquery.flot.min.js"></script>*@
        @*<script href="~/Content/js/jquery.toggle.buttons.html"></script>*@
        @*<script src="~/Content/js/jquery.flot.resize.min.js"></script>*@
        @*<script src="~/Content/js/masked.js"></script>*@
        <script src="~/Content/js/select2.min.js"></script>
        @*<script src="~/Content/js/matrix.js"></script>*@
        @*<script src="~/Content/js/matrix.dashboard.js"></script>
            <script src="~/Content/js/jquery.sparkline.js"></script>
            <script src="~/Content/js/matrix.form_common.js"></script>*@
        @*<script src="~/Content/js/wysihtml5-0.3.0.js"></script>*@
        @*<script src="~/Content/js/jquery.peity.min.js"></script>*@
        @*<script src="~/Content/js/bootstrap-wysihtml5.js"></script>*@
        @*<script src="~/Content/js/jquery.uniform.js"></script>
            <script src="~/Content/js/matrix.popover.js"></script>
            <script src="~/Content/js/jquery.dataTables.min.js"></script>
            <script src="~/Content/js/matrix.tables.js"></script>*@
        <script src="~/Content/js/vue.min.js"></script>
        <script type="text/javascript">
            function getParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                var r = window.location.search.substr(1).match(reg);
                if (r != null) return unescape(r[2]); return null;
            }
            new Vue({
                el: '#box',
                data: {
                    StationID: "",
                    StationName: "",
                    Sdate: null,
                    Edate: null
                },
                mounted() {
                    this.init();
                },
                methods: {
                    init() {
                        var Stationid = getParam("StationID");
                        var Stationname = decodeURIComponent(getParam("StationName"));
                        if (!!Stationid) {
                            this.StationID = getParam("StationID");
                        }
                        //alert(Stationname);
                        if (Stationname != "null") {
                            this.StationName = decodeURIComponent(getParam("StationName"));
                        }
                    },
                    showanno: function () {
                        //alert(11);
                        var styleObj = $("#listmesu").css("display");
                        if (styleObj == "none") {
                            $("#listmesu").css("display", "block");
                        } else if (styleObj == "block") {
                            $("#listmesu").css("display", "none");
                        }
                    },
                    btn_Search: function () {
                        //alert(11);
                        var Stationid = 0;
                        this.Sdate = $("#some_class_1").val();
                        this.Edate = $("#some_class_2").val();
                        if (this.StationID != "") {
                            Stationid = this.StationID;
                        }
                        var Stationname = this.StationName
                        var transType = $("input[name='radios']:checked").val();
                        //在初始化table之前，要将table销毁，否则会保留上次加载的内容
                        $("#table_server").bootstrapTable('destroy');
                        var t = $("#table_server").bootstrapTable({
                            url: "@Url.Content("~/DataHandle/RainWaterReport/GetWaterData")",
                            method: 'post',
                            dataType: "json",
                            striped: true,//设置为 true 会有隔行变色效果
                            undefinedText: "",//当数据为 undefined 时显示的字符
                            pagination: true, //分页
                            // paginationLoop:true,//设置为 true 启用分页条无限循环的功能。
                            //showToggle: "false",//是否显示 切换试图（table/card）按钮
                            showColumns: "true",//是否显示 内容列下拉框
                            showRefresh: true,
                            pageNumber: 1,//如果设置了分页，首页页码
                            // showPaginationSwitch:true,//是否显示 数据条数选择框
                            pageSize: 10,//如果设置了分页，页面数据条数
                            pageList: [10, 40, 60, 80],  //如果设置了分页，设置可供选择的页面数据条数。设置为All 则显示所有记录。
                            paginationPreText: '‹',//指定分页条中上一页按钮的图标或文字,这里是<
                            paginationNextText: '›',//指定分页条中下一页按钮的图标或文字,这里是>
                            // singleSelect: false,//设置True 将禁止多选
                            search: true, //显示搜索框
                            data_local: "zh-US",//表格汉化
                            sidePagination: "server", //服务端处理分页
                            queryParams: function (params) {//自定义参数，这里的参数是传给后台的，我这是是分页用的
                                return {//这里的params是table提供的
                                    cp: params.offset,//从数据库第几条记录开始
                                    ps: params.limit,//找多少条
                                    StationId: Stationid,
                                    Sdate: $("#some_class_1").val(),
                                    Edate: $("#some_class_2").val(),
                                    StationName: this.Stationname,
                                    transType: transType
                                };
                            },
                            //idField: "StationID",//指定主键列
                            // <th>测试时间</th>
                            //<th>水位</th>
                            //<th>电压</th>
                            //<th>数据接收时间</th>
                            //<th>报送类型</th>
                            columns: [
                                {
                                    title: '测试时间',//表的列名
                                    field: 'TM',//json数据中rows数组中的属性名
                                    align: 'center',//水平居中
                                    formatter: function (value, row, index) {
                                        return value.replace("T", " ");
                                    }
                                },
                                {
                                    title: '水位(m)',
                                    field: 'DI',
                                    align: 'left',
                                    formatter: function (value, row, index) {
                                       // alert(value);
                                        return (parseFloat(value)).toFixed(2);
                                    }
                                },
                                {
                                    title: '接收时间',
                                    field: 'INSERTTM',
                                    align: 'left',
                                    formatter: function (value, row, index) {
                                        return value.replace("T", " ");
                                    }
                                },
                                {
                                    title: '报送类型',
                                    field: 'PDR',
                                    align: 'left',
                                    formatter: function (value, row, index) {
                                        if (value == 5) {
                                            return value = "加报报";
                                        } else if (value == 60) {
                                            return value = "定时报";
                                        }
                                    }
                                },
                            ]
                        });
                        t.on('load-success.bs.table', function (data) {//table加载成功后的监听函数
                            // console.log("load success");
                            $(".pull-right").css("display", "block");
                        });
                        $("#table_server thead").find("tr").css("background", "#1bbc9b");
                        $("#table_server thead").find("tr").css("color", "white");
                    }
                }
            })
            // This function is called from the pop-up menus to transfer to
            // a different page. Ignore if the value returned is a null string:
            function goPage(newURL) {

                // if url is empty, skip the menu dividers and reset the menu selection to default
                if (newURL != "") {

                    // if url is "-", it is this page -- reset the menu:
                    if (newURL == "-") {
                        resetMenu();
                    }
                        // else, send page to designated URL
                    else {
                        document.location.href = newURL;
                    }
                }
            }

            // resets the menu selection upon entry to this page:
            function resetMenu() {
                document.gomenu.selector.selectedIndex = 2;
            }

            $.datetimepicker.setLocale('en');

            $('#datetimepicker_format').datetimepicker({ value: '2015/04/15 05:03', format: $("#datetimepicker_format_value").val() });
            console.log($('#datetimepicker_format').datetimepicker('getValue'));

            $("#datetimepicker_format_change").on("click", function (e) {
                $("#datetimepicker_format").data('xdsoft_datetimepicker').setOptions({ format: $("#datetimepicker_format_value").val() });
            });
            $("#datetimepicker_format_locale").on("change", function (e) {
                $.datetimepicker.setLocale($(e.currentTarget).val());
            });

            $('#datetimepicker').datetimepicker({
                dayOfWeekStart: 1,
                lang: 'en',
                disabledDates: ['1986/01/08', '1986/01/09', '1986/01/10'],
                startDate: '1986/01/05'
            });
            $('#datetimepicker').datetimepicker({ value: '2015/04/15 05:03', step: 10 });

            $('.some_class').datetimepicker();

            $('#default_datetimepicker').datetimepicker({
                formatTime: 'H:i',
                formatDate: 'd.m.Y',
                //defaultDate:'8.12.1986', // it's my birthday
                defaultDate: '+03.01.1970', // it's my birthday
                defaultTime: '10:00',
                timepickerScrollbar: false
            });

            $('#datetimepicker10').datetimepicker({
                step: 5,
                inline: true
            });
            $('#datetimepicker_mask').datetimepicker({
                mask: '9999/19/39 29:59'
            });

            $('#datetimepicker1').datetimepicker({
                datepicker: false,
                format: 'H:i',
                step: 5
            });
            $('#datetimepicker2').datetimepicker({
                yearOffset: 222,
                lang: 'ch',
                timepicker: false,
                format: 'd/m/Y',
                formatDate: 'Y/m/d',
                minDate: '-1970/01/02', // yesterday is minimum date
                maxDate: '+1970/01/02' // and tommorow is maximum date calendar
            });
            $('#datetimepicker3').datetimepicker({
                inline: true
            });
            $('#datetimepicker4').datetimepicker();
            $('#open').click(function () {
                $('#datetimepicker4').datetimepicker('show');
            });
            $('#close').click(function () {
                $('#datetimepicker4').datetimepicker('hide');
            });
            $('#reset').click(function () {
                $('#datetimepicker4').datetimepicker('reset');
            });
            $('#datetimepicker5').datetimepicker({
                datepicker: false,
                allowTimes: ['12:00', '13:00', '15:00', '17:00', '17:05', '17:20', '19:00', '20:00'],
                step: 5
            });
            $('#datetimepicker6').datetimepicker();
            $('#destroy').click(function () {
                if ($('#datetimepicker6').data('xdsoft_datetimepicker')) {
                    $('#datetimepicker6').datetimepicker('destroy');
                    this.value = 'create';
                } else {
                    $('#datetimepicker6').datetimepicker();
                    this.value = 'destroy';
                }
            });
            var logic = function (currentDateTime) {
                if (currentDateTime && currentDateTime.getDay() == 6) {
                    this.setOptions({
                        minTime: '11:00'
                    });
                } else
                    this.setOptions({
                        minTime: '8:00'
                    });
            };
            $('#datetimepicker7').datetimepicker({
                onChangeDateTime: logic,
                onShow: logic
            });
            $('#datetimepicker8').datetimepicker({
                onGenerate: function (ct) {
                    $(this).find('.xdsoft_date')
                        .toggleClass('xdsoft_disabled');
                },
                minDate: '-1970/01/2',
                maxDate: '+1970/01/2',
                timepicker: false
            });
            $('#datetimepicker9').datetimepicker({
                onGenerate: function (ct) {
                    $(this).find('.xdsoft_date.xdsoft_weekend')
                        .addClass('xdsoft_disabled');
                },
                weekends: ['01.01.2014', '02.01.2014', '03.01.2014', '04.01.2014', '05.01.2014', '06.01.2014'],
                timepicker: false
            });
            var dateToDisable = new Date();
            dateToDisable.setDate(dateToDisable.getDate() + 2);
            $('#datetimepicker11').datetimepicker({
                beforeShowDay: function (date) {
                    if (date.getMonth() == dateToDisable.getMonth() && date.getDate() == dateToDisable.getDate()) {
                        return [false, ""]
                    }

                    return [true, ""];
                }
            });
            $('#datetimepicker12').datetimepicker({
                beforeShowDay: function (date) {
                    if (date.getMonth() == dateToDisable.getMonth() && date.getDate() == dateToDisable.getDate()) {
                        return [true, "custom-date-style"];
                    }

                    return [true, ""];
                }
            });
            $('#datetimepicker_dark').datetimepicker({ theme: 'dark' })
        </script>
</body>
</html>

